(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{818:(e,t,s)=>{"use strict";s.d(t,{BiasDetectionApp:()=>u});var a=s(5155),n=s(2115),r=s(9509);let l={baseUrl:r.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",endpoints:{analyze:"/analyze",health:"/health"},timeout:3e4};class i extends Error{constructor(e,t,s){super(e),this.status=t,this.code=s,this.name="ApiError"}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(l.baseUrl).concat(e);try{let e=await fetch(s,{...t,headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers}});if(!e.ok){let t=await e.json().catch(()=>({}));throw new i(t.message||"HTTP ".concat(e.status,": ").concat(e.statusText),e.status,t.code)}return await e.json()}catch(e){if(e instanceof i)throw e;throw new i(e instanceof Error?e.message:"Network error occurred",0,"NETWORK_ERROR")}}async function d(e){return r.env.NEXT_PUBLIC_API_URL?o(l.endpoints.analyze,{method:"POST",body:JSON.stringify(e)}):(await new Promise(e=>setTimeout(e,1e3+1e3*Math.random())),function(e){let t=["stupid","dumb","crazy","insane","lame"].map(t=>{let s=e.toLowerCase().indexOf(t);return -1===s?null:{word:t,startIndex:s,endIndex:s+t.length,category:"general_bias",confidence:.75,suggestions:[{word:"unclear",confidence:.8,reason:"More neutral language"},{word:"confusing",confidence:.7,reason:"Describes the issue without judgment"}],explanation:"This word may be perceived as ableist or judgmental"}}).filter(e=>null!==e);return{originalText:e,flaggedWords:t,analysisId:"mock-".concat(Date.now()),timestamp:new Date().toISOString(),confidence:.85}}(e.text))}function c(e){let{title:t="Bias Detection Tool",className:s=""}=e;return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 ".concat(s),children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:t})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"AI-Powered Text Analysis"})})]})})})}let m=[];function x(e){let{value:t,onChange:s,onClear:r,onAnalyze:l,placeholder:i="Type or paste your text here...",disabled:o=!1,isAnalyzing:d=!1,error:c=null,label:x="Enter text to analyze",maxLength:u=5e3,minLength:h=5,className:g="",showCharacterCount:f=!0,showClearButton:b=!0,showAnalyzeButton:p=!0,analyzeButtonText:y="Analyze Text",clearButtonText:j="Clear",validateOnChange:v=!0,validationRules:N=m,onValidationChange:w,confirmClearThreshold:C=50,showClearConfirmation:E=!0}=e,[T,k]=(0,n.useState)([]),[A,_]=(0,n.useState)(!0),[z,L]=(0,n.useState)(!1),S=(0,n.useRef)(null),I=(0,n.useMemo)(()=>[{type:"required",message:"Text is required",validator:e=>e.trim().length>0},{type:"minLength",value:h,message:"Text must be at least ".concat(h," characters long"),validator:e=>e.trim().length>=h},{type:"maxLength",value:u,message:"Text must not exceed ".concat(u," characters"),validator:e=>e.length<=u},...N],[h,u,N]),P=(0,n.useCallback)(e=>{let t=[];for(let s of I){let a=!1;switch(s.type){case"required":a=e.trim().length>0;break;case"minLength":a=0===e.trim().length||e.trim().length>=(s.value||h);break;case"maxLength":a=e.length<=(s.value||u);break;case"custom":a=!s.validator||s.validator(e);break;default:a=!0}a||t.push(s.message)}return{isValid:0===t.length,errors:t}},[I,h,u]);(0,n.useEffect)(()=>{if(v){let{isValid:e,errors:s}=P(t);_(e),k(s)}},[t,v,P]),(0,n.useEffect)(()=>{w&&v&&w(A,T)},[A,T,w,v]),(0,n.useEffect)(()=>{if(z){let e=e=>{"Escape"===e.key?O():"Enter"===e.key&&B()},t=e=>{S.current&&!S.current.contains(e.target)&&O()};return document.addEventListener("keydown",e),document.addEventListener("mousedown",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}}},[z]);let B=()=>{L(!1),r&&r()},O=()=>{L(!1)},R=t.length>=u,W=t.length>=.8*u;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 ".concat(g),children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"text-input",className:"block text-sm font-medium text-gray-700 mb-2",children:x}),(0,a.jsx)("textarea",{id:"text-input",value:t,onChange:e=>{s(e.target.value)},placeholder:i,maxLength:u,className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",disabled:o||d})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-between sm:items-center",children:[f&&(0,a.jsxs)("div",{className:"text-sm ".concat(R?"text-red-600":W?"text-yellow-600":"text-gray-500"),children:[t.length," / ",u," characters"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[b&&(0,a.jsx)("button",{onClick:()=>{E&&t.length>=C?L(!0):r&&r()},disabled:!t||d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:j}),p&&(0,a.jsx)("button",{onClick:()=>{l&&l()},disabled:!t.trim()||d||!A,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Analyzing...":y})]})]}),c&&(0,a.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:c})]})})}),T.length>0&&v&&(0,a.jsx)("div",{className:"rounded-md bg-orange-50 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-orange-800",children:["Validation ",1===T.length?"Error":"Errors"]}),(0,a.jsx)("div",{className:"mt-2",children:T.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm text-orange-700",children:["• ",e]},t))})]})})})]}),z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{ref:S,className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Clear Text"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["You have ",t.length," characters of text. Are you sure you want to clear all your text? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:O,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Clear Text"})]})]})})]})}function u(){let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(!1),[l,i]=(0,n.useState)(null),[o,m]=(0,n.useState)(null),u=(0,n.useCallback)(async()=>{if(!e.trim())return void m("Please enter some text to analyze");r(!0),m(null);try{let t={text:e.trim(),options:{sensitivity:"medium",categories:["gender_bias","racial_bias","religious_bias","general_bias"]}},s=await d(t);i(s)}catch(e){m(e instanceof Error?e.message:"An error occurred during analysis"),i(null)}finally{r(!1)}},[e]),h=(0,n.useCallback)(()=>{t(""),i(null),m(null)},[]);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(c,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"text-center mb-8",children:(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Analyze text for potential bias and get suggestions for improvement"})}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(x,{value:e,onChange:t,onClear:h,onAnalyze:u,isAnalyzing:s,error:o,placeholder:"Type or paste your text here...",label:"Enter text to analyze",maxLength:5e3,showCharacterCount:!0,showClearButton:!0,showAnalyzeButton:!0,analyzeButtonText:"Analyze Text",clearButtonText:"Clear"}),l&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Analysis Results"}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Analysis Confidence:"}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat((l.confidence||0)>.7?"text-green-600":(l.confidence||0)>.5?"text-yellow-600":"text-red-600"),children:[Math.round(100*(l.confidence||0)),"%"]})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[0===l.flaggedWords.length&&"No issues detected",l.flaggedWords.length>0&&"".concat(l.flaggedWords.length," potential issue").concat(l.flaggedWords.length>1?"s":""," found")]})]}),l.flaggedWords.length>0?(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Detected Issues (",l.flaggedWords.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:l.flaggedWords.map((s,n)=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:s.category}),(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["Confidence: ",Math.round(100*s.confidence),"%"]})]})}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Flagged text: "}),(0,a.jsxs)("span",{className:"text-sm bg-yellow-100 px-1 rounded",children:['"',s.word,'"']})]}),s.explanation&&(0,a.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Explanation: "}),s.explanation]}),s.suggestions&&s.suggestions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Suggestions: "}),(0,a.jsx)("div",{className:"mt-1 flex flex-wrap gap-1",children:s.suggestions.map((n,r)=>(0,a.jsxs)("button",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>{t(e.replace(s.word,n.word))},children:['"',n.word,'"']},r))})]})]},n))})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-green-600 text-lg font-medium mb-2",children:"✓ No bias detected"}),(0,a.jsx)("div",{className:"text-gray-600",children:"The text appears to be free from detectable bias patterns."})]})]})]})]})]})}},5435:(e,t,s)=>{Promise.resolve().then(s.bind(s,818))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5435)),_N_E=e.O()}]);